.dialectics{ 'ng-controller' => 'RouteCtrl' }
  Do you have an idea for a tiny class you could teach on a bus?
  Do you want to connect with people riding with you?
  .btn.small{ 'ng-click' => 'doCreate = true' } Offer a class
  .btn.small{ 'ng-click' => 'loadDialectics()' } See my offered classes

  .create{ 'ng-show' => 'doCreate', 'ng-controller' => 'DialecticCtrl' }
    %form{ 'ng-hide' => 'created' }
      %legend Create a class
      .alert.alert-error{ 'ng-show' => 'errors' } {{errors}}
      %label Title
      %input{ 'ng-model' => 'dialectic.title', type: 'text', required: true }
      %label Description
      %textarea{ 'ng-model' => 'dialectic.description', type: 'text', required: true }
      .small
        %a{ 'ng-click' => 'useTemplate()' } Use template
        == | Fancy formatting using 
        %a{ href: 'http://daringfireball.net/projects/markdown/', target: "_new" } Markdown 

      %label Where do you want to teach this class
      = render partial: 'dialectics/city'
      = render partial: 'dialectics/routes'
      = render partial: 'dialectics/stops'

      .hide
        %label Maximum participants?
        %select{ 'ng-options' => 'c for c in maxOptions', "ng-model" => "dialectic.maximum" }
          %option{ val: '' } No maximum
  
        %label Minimum participants?
        %select{ 'ng-options' => 'c for c in minOptions', "ng-model" => "dialectic.minimum" }
          %option{ val: '' } No minimum
  
      .after_route{ 'ng-show' => 'stop' }
        %label (optional) What days do you want to offer the class?
        .btn-group
          %span.btn{ 'ng-repeat' => 'd in days', 'ng-class' => '{ "btn-inverse": d.selected }', 'ng-click' => 'd.selected = !d.selected' }{{d.name}}
  
        %label (optional) What time slots are you willing to offer your class?
        %select{ 'ng-options' => 'c for c in times', "ng-model" => "dialectic.times", multiple: true }

        .prerequisites.visible-phone
          If you edit this on a desktop computer you can edit prerequisites, like books to read in advance, links to check out, or even locations to visit.
        .prerequisites.hidden-phone
          %div{ 'ng-show' => 'prerequisites' }
            Prerequisites:          
            .prerequisite{ 'ng-repeat' => 'p in prerequisites' }
              %a{ href: "{{p.link}}" } {{p.comment}}
              .btn{ 'ng-click' => 'remove(p)' } Remove this prerequisite

          %label (optional) Add a prerequisite (book, link, location to visit)?
          .btn-group{ 'ng-hide' => 'prereq.type' }
            .btn{ 'ng-click' => 'prereq.type == "link"' } Add link
            .btn{ 'ng-click' => 'modals.map = true; prereq.type == "location"' } Add location
            .btn{ 'ng-click' => 'modals.book = true; prereq.type == "book"' } Add book

          .link{ 'ng-show' => 'prereq.type == "link"' }
            %label Add link
            %input{ 'ng-model' => 'prereq.link', type: 'text', placeholder: 'Enter URL' }
            .btn{ 'ng-click' => 'addPrerequisite()' } Add link

          #bookModal.modal{ "ui-modal" => true, class: "fade", "ng-model" => "modals.book" }
            .wrapper{ 'ng-controller' => 'BookCtrl' }
              %input{ type: 'text', placeholder: 'Enter title, author or description to search', 'ng-model' => 'searchText' }
              .btn{ 'ng-click' => 'search()' } Search

              .results{ 'ng-show' => 'results' }
                %strong Top 10 results
                
                .result{ 'ng-repeat' => 'item in results' }
                  .title
                    %strong {{item.attributes.Title}}
                  .details
                    .author {{item.attributes.Author}}
                    .manufacturer {{item.attributes.Manufacturer}}
                    .url
                      %a{ href: '{{item.url}}', target: 'books' } See more about this book.
                  .btn{ 'ng-click' => 'addBookAsPrerequisite(item)' } Add book as class prerequisite.

          #mapModal.modal{ "ui-modal" => true, class: "fade", "ng-model" => "modals.map" }
            .wrapper{ 'ng-controller' => 'MapCtrl' }
              #placesMap{ "ui-map" => "myMap", "ui-event" => "{'map-click': 'addMarker($event)', 'map-zoom_changed': 'setZoomMessage(myMap.getZoom())' }", "ui-options" => "mapOptions" }
              .search
                %input{ 'ng-model' => 'mapSearch', placeholder: "Enter a location..." }
                .btn{ 'ng-click' => 'searchPlaces()' } Search
                .results
                  .result{ 'ng-repeat' => 'item in results' }
                    {{item.name}}

  
      %br
      .btn{ 'ng-click' => 'create()' } Create this class
    %div{ 'ng-show' => 'created' }
      {{message}}

  
  .dialectics{ 'ng-show' => 'dialectics' }
    %h3 My classes:
    .wrapper{ 'ng-repeat' => 'dialectic in dialectics' }
      = render partial: "dialectics/dialectic"
  
